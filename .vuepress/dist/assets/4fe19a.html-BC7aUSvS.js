import{_ as r,c as l,e as i,a as t,b as a,d as s,o,r as d}from"./app-DVyU65El.js";const c={},m={href:"https://www.jianshu.com/p/f111eaf4393d",target:"_blank",rel:"noopener noreferrer"},p={href:"https://blog.csdn.net/u014479551/article/details/107762513",target:"_blank",rel:"noopener noreferrer"},h={href:"https://mmdetection.readthedocs.io/en/latest/changelog.html",target:"_blank",rel:"noopener noreferrer"};function g(u,e){const n=d("ExternalLinkIcon");return o(),l("div",null,[e[3]||(e[3]=i(`<h2 id="梯度裁减" tabindex="-1"><a class="header-anchor" href="#梯度裁减"><span><strong>梯度裁减</strong></span></a></h2><p>在模型配置中加上<code>grad_clip</code>:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">optimizer_config = dict(_delete_=True, grad_clip=dict(max_norm=35, norm_type=2))</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="减小学习率" tabindex="-1"><a class="header-anchor" href="#减小学习率"><span><strong>减小学习率</strong></span></a></h2><p>如果添加了梯度裁剪依旧出现梯度爆炸的问题。那么可以考虑降低学习率，大约降低为原来的0.1即可。</p><blockquote><p>mmdetection 从 2.24.0 开始可以自动根据 batch_size 调节学习率，在模型配置中加上：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">auto_scale_lr = dict(enable=True, base_batch_size=64)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中 <code>base_batch_size</code> 需要根据你选择的模型作出相应的修改。</p></blockquote><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章"><span><strong>参考文章</strong></span></a></h2>`,7)),t("p",null,[t("a",m,[e[0]||(e[0]=a("mmdetection中出现 loss为 nan的情况")),s(n)])]),t("p",null,[t("a",p,[e[1]||(e[1]=a("解决模型训练loss nan的问题")),s(n)])]),t("p",null,[t("a",h,[e[2]||(e[2]=a("https://mmdetection.readthedocs.io/en/latest/changelog.html")),s(n)])])])}const b=r(c,[["render",g],["__file","4fe19a.html.vue"]]),f=JSON.parse('{"path":"/pages/4fe19a.html","title":"mmdetection训练出现nan","lang":"en-US","frontmatter":{"title":"mmdetection训练出现nan","date":"2022/05/12","permalink":"/pages/4fe19a.html","categories":["mmdetection"],"tags":["mmdetection"]},"headers":[{"level":2,"title":"梯度裁减","slug":"梯度裁减","link":"#梯度裁减","children":[]},{"level":2,"title":"减小学习率","slug":"减小学习率","link":"#减小学习率","children":[]},{"level":2,"title":"参考文章","slug":"参考文章","link":"#参考文章","children":[]}],"git":{"createdTime":1732191603000,"updatedTime":1732191603000,"contributors":[{"name":"Ghlerrix","email":"Ghlerrix@outlook.com","commits":1}]},"filePathRelative":"blogs/mmdetection/mmdetection训练出现nan.md"}');export{b as comp,f as data};
